<style>
  .product-slider .slide img {
    opacity: 0.5;
    transition: opacity 0.4s;
  }
  .product-slider .slide .slide-label {
    opacity: 0;
    transition: opacity 0.4s;
  }
  .product-slider .slide.slide-active img {
    opacity: 1;
    transition: opacity 0.4s;
  }
  .product-slider .slide.slide-active .slide-label {
    opacity: 1;
    transition: opacity 0.4s;
  }
</style>

{% capture slides %}
    {% for prod in section.settings.collection.products %}
        <a class="slide relative !w-2/3 md:!w-1/2 cursor-pointer" data-link="{{ prod.url }}">
            {% render 
               "component--responsive-image",
               image: prod.featured_image,
               placeholder: true,
               objectFit: false, 
            %}
            <div class="slide-label richtext">
                {% render 'component--product-title' 
                   classes: '!mb-[8px] md:!mb-[20px] text-center md:text-[60px] md:!leading-[80%] md:!tracking-[-0.05em]',
                   tag: 'h2',
                   title: prod.title | escape 
                %}
                <p class="text-center !mb-0 text-sm">
                    <svg class="inline" width="32" height="15" viewBox="0 0 32 15" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="none">
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M16.5771 14.4952C16.5653 14.4954 16.5538 14.4971 16.5428 14.5H15.4572C15.4462 14.4971 15.4347 14.4954 15.4229 14.4952C11.2519 14.4258 7.50637 13.6075 4.80889 12.3319C2.09828 11.0501 0.5 9.33562 0.5 7.5C0.5 6.5614 0.915681 5.65601 1.68953 4.81999C2.46408 3.98319 3.59173 3.22283 4.99625 2.58104C7.80492 1.29761 11.6952 0.5 16 0.5C20.3048 0.5 24.1951 1.29761 27.0038 2.58104C28.4083 3.22283 29.5359 3.98319 30.3105 4.81999C31.0843 5.65601 31.5 6.5614 31.5 7.5C31.5 9.33562 29.9017 11.0501 27.1911 12.3319C24.4936 13.6075 20.7481 14.4258 16.5771 14.4952ZM15.5654 1.57971C15.5654 1.53699 15.5476 1.49632 15.5164 1.46805C15.4853 1.43978 15.4438 1.42662 15.4026 1.43193C13.917 1.62314 12.5819 2.51717 11.7067 3.84185C11.6766 3.88747 11.6734 3.9465 11.6985 3.99524C11.7236 4.04398 11.7729 4.07447 11.8265 4.07447L15.4206 4.07447C15.459 4.07447 15.4958 4.05878 15.523 4.03085C15.5502 4.00292 15.5654 3.96503 15.5654 3.92553V1.57971ZM16.5974 1.43193C16.5562 1.42662 16.5147 1.43978 16.4836 1.46805C16.4524 1.49632 16.4346 1.53699 16.4346 1.57971V3.92553C16.4346 4.00779 16.4994 4.07447 16.5794 4.07447L20.1735 4.07447C20.2271 4.07447 20.2764 4.04398 20.3015 3.99524C20.3266 3.9465 20.3234 3.88748 20.2933 3.84185C19.4181 2.51717 18.083 1.62314 16.5974 1.43193ZM11.8972 2.23306C11.9452 2.18573 11.9557 2.11079 11.9226 2.05141C11.8895 1.99204 11.8213 1.96351 11.7573 1.98226C10.6217 2.3148 9.60634 2.77469 8.7567 3.32641C8.51757 3.48168 8.29393 3.64234 8.08579 3.80767C8.03675 3.84663 8.01724 3.91334 8.03726 3.97364C8.05728 4.03394 8.11238 4.07447 8.17436 4.07447H10.4789C10.5325 4.07447 10.5817 4.04401 10.6069 3.99531C10.9496 3.33071 11.3867 2.73564 11.8972 2.23306ZM20.2427 1.98226C20.1787 1.96351 20.1105 1.99204 20.0774 2.05141C20.0443 2.11079 20.0548 2.18573 20.1028 2.23306C20.6133 2.73565 21.0504 3.33071 21.3931 3.99531C21.4183 4.04401 21.4675 4.07447 21.5211 4.07447H23.8256C23.8876 4.07447 23.9427 4.03394 23.9627 3.97364C23.9828 3.91334 23.9632 3.84663 23.9142 3.80767C23.7061 3.64234 23.4824 3.48168 23.2433 3.32641C22.3937 2.77469 21.3783 2.3148 20.2427 1.98226ZM24.0421 2.44735C23.9736 2.42766 23.9012 2.4621 23.8715 2.5286C23.8418 2.5951 23.8635 2.67395 23.9226 2.71462C24.5012 3.11218 25.0076 3.55235 25.4297 4.02613C25.4571 4.05693 25.4959 4.07447 25.5365 4.07447L27.3833 4.07447C27.45 4.07447 27.508 4.02764 27.5239 3.96103C27.5398 3.89442 27.5094 3.82527 27.4503 3.79352C27.1981 3.65809 26.9315 3.52592 26.6508 3.39764C25.8686 3.04024 24.9936 2.72068 24.0421 2.44735ZM8.07735 2.71462C8.13654 2.67395 8.15821 2.5951 8.12848 2.5286C8.09876 2.4621 8.02644 2.42766 7.95788 2.44735C7.00636 2.72068 6.13138 3.04024 5.34925 3.39764C5.0685 3.52592 4.8019 3.65809 4.54969 3.79352C4.49056 3.82526 4.46016 3.89442 4.47606 3.96103C4.49196 4.02763 4.55004 4.07447 4.61675 4.07447L6.46351 4.07447C6.50413 4.07447 6.54289 4.05693 6.57033 4.02613C6.99239 3.55235 7.49879 3.11218 8.07735 2.71462ZM2.85816 4.96808C2.8236 4.96808 2.79018 4.98079 2.76393 5.00391C2.60204 5.14648 2.45368 5.29069 2.31914 5.43603C1.86658 5.92496 1.59055 6.40242 1.45992 6.86252C1.44715 6.90753 1.45573 6.95609 1.48308 6.9936C1.51044 7.03111 1.55338 7.05319 1.59898 7.05319H5.02834C5.10109 7.05319 5.16255 6.99771 5.17198 6.92354C5.24837 6.32221 5.44343 5.74108 5.74352 5.18975C5.76862 5.14363 5.76807 5.08728 5.74207 5.04169C5.71607 4.99609 5.66851 4.96808 5.61711 4.96808H2.85816ZM7.0017 4.96808C6.95652 4.96808 6.91393 4.98975 6.88653 5.02668C6.44607 5.62028 6.16891 6.24614 6.05885 6.878C6.05129 6.9214 6.06282 6.96602 6.09035 6.99984C6.11787 7.03365 6.15855 7.05319 6.20144 7.05319L9.64798 7.05319C9.72375 7.05319 9.78672 6.99316 9.79243 6.91549C9.83729 6.30562 9.95171 5.71811 10.1267 5.16293C10.1409 5.11759 10.1333 5.06797 10.106 5.02943C10.0788 4.99089 10.0352 4.96808 9.98885 4.96808H7.0017ZM11.2163 4.96808C11.1567 4.96808 11.1032 5.00556 11.0815 5.06255C10.8651 5.62867 10.7216 6.24255 10.6661 6.89119C10.6625 6.9328 10.6761 6.97404 10.7035 7.00484C10.731 7.03565 10.7697 7.05319 10.8104 7.05319H15.4206C15.5006 7.05319 15.5654 6.98651 15.5654 6.90425V5.11702C15.5654 5.03477 15.5006 4.96808 15.4206 4.96808H11.2163ZM16.5794 4.96808C16.541 4.96808 16.5042 4.98378 16.477 5.01171C16.4498 5.03964 16.4346 5.07752 16.4346 5.11702V6.90425C16.4346 6.98651 16.4994 7.05319 16.5794 7.05319H21.1896C21.2303 7.05319 21.269 7.03565 21.2965 7.00484C21.3239 6.97404 21.3375 6.9328 21.3339 6.89119C21.2784 6.24255 21.1349 5.62867 20.9185 5.06255C20.8968 5.00556 20.8433 4.96808 20.7837 4.96808L16.5794 4.96808ZM22.0111 4.96808C21.9648 4.96808 21.9212 4.99089 21.894 5.02943C21.8667 5.06797 21.8591 5.11759 21.8733 5.16293C22.0483 5.71811 22.1627 6.30562 22.2076 6.91549C22.2133 6.99316 22.2762 7.05319 22.352 7.05319L25.7986 7.05319C25.8414 7.05319 25.8821 7.03365 25.9097 6.99984C25.9372 6.96602 25.9487 6.9214 25.9411 6.878C25.8311 6.24614 25.5539 5.62028 25.1135 5.02668C25.0861 4.98976 25.0435 4.96808 24.9983 4.96808H22.0111ZM26.3829 4.96808C26.3315 4.96808 26.2839 4.9961 26.2579 5.04169C26.2319 5.08729 26.2314 5.14363 26.2565 5.18976C26.5566 5.74108 26.7516 6.32222 26.828 6.92355C26.8374 6.99771 26.8989 7.05319 26.9717 7.05319H30.401C30.4466 7.05319 30.4896 7.03112 30.5169 6.9936C30.5443 6.95609 30.5529 6.90753 30.5401 6.86252C30.4094 6.40242 30.1334 5.92496 29.6809 5.43603C29.5463 5.29069 29.398 5.14648 29.2361 5.00391C29.2098 4.98079 29.1764 4.96808 29.1418 4.96808H26.3829ZM1.59898 7.94681C1.55338 7.94681 1.51044 7.96888 1.48308 8.00639C1.45573 8.0439 1.44715 8.09247 1.45992 8.13748C1.59055 8.59758 1.86658 9.07504 2.31914 9.56397C2.45368 9.70931 2.60204 9.85352 2.76392 9.99609C2.79017 10.0192 2.8236 10.0319 2.85816 10.0319H5.61711C5.66852 10.0319 5.71607 10.0039 5.74207 9.95831C5.76807 9.91271 5.76862 9.85637 5.74352 9.81024C5.44343 9.25892 5.24837 8.67778 5.17198 8.07645C5.16255 8.00228 5.10109 7.94681 5.02834 7.94681H1.59898ZM6.20144 7.94681C6.15855 7.94681 6.11787 7.96635 6.09035 8.00016C6.06282 8.03398 6.05129 8.0786 6.05885 8.122C6.16891 8.75385 6.44607 9.37972 6.88653 9.97332C6.91393 10.0102 6.95652 10.0319 7.0017 10.0319H9.98885C10.0352 10.0319 10.0788 10.0091 10.106 9.97057C10.1333 9.93203 10.1409 9.88241 10.1267 9.83707C9.95171 9.28189 9.83729 8.69438 9.79243 8.08451C9.78672 8.00684 9.72375 7.94681 9.64798 7.94681L6.20144 7.94681ZM10.8104 7.94681C10.7697 7.94681 10.731 7.96435 10.7035 7.99516C10.6761 8.02596 10.6625 8.0672 10.6661 8.10881C10.7216 8.75745 10.8651 9.37133 11.0815 9.93745C11.1032 9.99444 11.1567 10.0319 11.2163 10.0319H15.4206C15.5006 10.0319 15.5654 9.96523 15.5654 9.88298V8.09574C15.5654 8.01349 15.5006 7.94681 15.4206 7.94681H10.8104ZM16.5794 7.94681C16.4994 7.94681 16.4346 8.01349 16.4346 8.09574V9.88298C16.4346 9.96523 16.4994 10.0319 16.5794 10.0319H20.7837C20.8433 10.0319 20.8968 9.99444 20.9185 9.93745C21.1349 9.37133 21.2784 8.75745 21.3339 8.10881C21.3375 8.0672 21.3239 8.02596 21.2965 7.99516C21.269 7.96435 21.2303 7.94681 21.1896 7.94681H16.5794ZM22.352 7.94681C22.2762 7.94681 22.2133 8.00684 22.2076 8.08451C22.1627 8.69438 22.0483 9.28189 21.8733 9.83707C21.8591 9.88241 21.8667 9.93203 21.894 9.97057C21.9212 10.0091 21.9648 10.0319 22.0111 10.0319H24.9983C25.0435 10.0319 25.0861 10.0102 25.1135 9.97332C25.5539 9.37972 25.8311 8.75385 25.9411 8.122C25.9487 8.0786 25.9372 8.03398 25.9097 8.00016C25.8821 7.96635 25.8414 7.94681 25.7986 7.94681L22.352 7.94681ZM26.9717 7.94681C26.8989 7.94681 26.8374 8.00229 26.828 8.07645C26.7516 8.67778 26.5566 9.25892 26.2565 9.81025C26.2314 9.85637 26.2319 9.91271 26.2579 9.95831C26.2839 10.0039 26.3315 10.0319 26.3829 10.0319H29.1418C29.1764 10.0319 29.2098 10.0192 29.2361 9.99609C29.398 9.85352 29.5463 9.70931 29.6809 9.56397C30.1334 9.07504 30.4094 8.59758 30.5401 8.13748C30.5529 8.09247 30.5443 8.04391 30.5169 8.0064C30.4896 7.96888 30.4466 7.94681 30.401 7.94681H26.9717ZM4.61675 10.9255C4.55004 10.9255 4.49196 10.9724 4.47606 11.039C4.46016 11.1056 4.49056 11.1747 4.54969 11.2065C4.8019 11.3419 5.0685 11.4741 5.34925 11.6024C6.13138 11.9598 7.00636 12.2793 7.95788 12.5526C8.02644 12.5723 8.09876 12.5379 8.12848 12.4714C8.15821 12.4049 8.13654 12.326 8.07735 12.2854C7.4988 11.8878 6.99239 11.4477 6.57033 10.9739C6.54289 10.9431 6.50414 10.9255 6.46351 10.9255H4.61675ZM8.17435 10.9255C8.11238 10.9255 8.05728 10.9661 8.03726 11.0264C8.01724 11.0867 8.03675 11.1534 8.08579 11.1923C8.29393 11.3577 8.51757 11.5183 8.7567 11.6736C9.60634 12.2253 10.6217 12.6852 11.7573 13.0177C11.8213 13.0365 11.8895 13.008 11.9226 12.9486C11.9557 12.8892 11.9452 12.8143 11.8972 12.7669C11.3867 12.2644 10.9496 11.6693 10.6069 11.0047C10.5817 10.956 10.5325 10.9255 10.4789 10.9255H8.17435ZM11.8265 10.9255C11.7729 10.9255 11.7236 10.956 11.6985 11.0048C11.6734 11.0535 11.6766 11.1125 11.7067 11.1582C12.5819 12.4828 13.917 13.3769 15.4026 13.5681C15.4438 13.5734 15.4853 13.5602 15.5164 13.532C15.5476 13.5037 15.5654 13.463 15.5654 13.4203V11.0745C15.5654 10.9922 15.5006 10.9255 15.4206 10.9255H11.8265ZM16.5794 10.9255C16.4994 10.9255 16.4346 10.9922 16.4346 11.0745V13.4203C16.4346 13.463 16.4524 13.5037 16.4836 13.532C16.5147 13.5602 16.5562 13.5734 16.5974 13.5681C18.083 13.3769 19.4181 12.4828 20.2933 11.1582C20.3234 11.1125 20.3266 11.0535 20.3015 11.0048C20.2764 10.956 20.2271 10.9255 20.1735 10.9255H16.5794ZM21.5211 10.9255C21.4675 10.9255 21.4183 10.956 21.3931 11.0047C21.0504 11.6693 20.6133 12.2644 20.1028 12.7669C20.0548 12.8143 20.0443 12.8892 20.0774 12.9486C20.1105 13.008 20.1787 13.0365 20.2427 13.0177C21.3783 12.6852 22.3937 12.2253 23.2433 11.6736C23.4824 11.5183 23.7061 11.3577 23.9142 11.1923C23.9632 11.1534 23.9828 11.0867 23.9627 11.0264C23.9427 10.9661 23.8876 10.9255 23.8256 10.9255H21.5211ZM25.5365 10.9255C25.4959 10.9255 25.4571 10.9431 25.4297 10.9739C25.0076 11.4476 24.5012 11.8878 23.9226 12.2854C23.8635 12.326 23.8418 12.4049 23.8715 12.4714C23.9012 12.5379 23.9736 12.5723 24.0421 12.5526C24.9936 12.2793 25.8686 11.9598 26.6508 11.6024C26.9315 11.4741 27.1981 11.3419 27.4503 11.2065C27.5094 11.1747 27.5398 11.1056 27.5239 11.039C27.508 10.9724 27.45 10.9255 27.3833 10.9255H25.5365Z" fill="#1E1E1E" />
                    </svg>
                    {{ prod.metafields.custom.variant_short_title }}</p>
            </div>
        </a>
    {% endfor %}
{% endcapture %}

<div
  class="product-slider pb-[var(--mb-m)] dk:pb-[var(--mb-d)]"
  style="{{ section.settings.margin_bottom }} {% if section.settings.animation == "Fade" %} opacity: 0; {% endif %}"
  data-animation="{{- section.settings.animation -}}"
>
  <div class="w-full overflow-hidden">
    {% render 'slot--carousel',
      slot: slides,
      pagination: false,
      mobileOnly: false,
      centered: true,
      loops: true,
      autoplay: true,
      loadPrevNext: true,
      classes: '',
      speed: 300,
      timing: 6000,
      gutter: 10,
      sectionID: section.id,
      onClick: 'change-to'
    %}
    {% if section.settings.cta_text != blank and section.settings.cta_url != blank %}
      <div class="cx mt-[30px] dk:mt-[50px]">
        <a href="{{ section.settings.cta_url }}" class="btn {{ section.settings.button_style }} mx-auto">
          {{- section.settings.cta_text -}}
        </a>
      </div>
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Product Slider",
  "tag": "section",
  "settings": [
    {
      "type": "select",
      "id": "animation",
      "label": "t:settings_schema.animations.settings.animation.label",
      "info": "t:settings_schema.animations.settings.animation.info",
      "options": [
        {
          "value": "",
          "label": "t:settings_schema.animations.settings.none.label"
        },
        {
          "value": "Fade",
          "label": "t:settings_schema.animations.settings.fade.label"
        },
        {
          "value": "StaggerFade",
          "label": "t:settings_schema.animations.settings.stagger_fade.label"
        }
      ],
      "default": ""
    },
    {
      "type": "select",
      "id": "margin_bottom",
      "label": "Bottom Margin",
      "info": "Optional space at bottom of section",
      "options": [
        {
          "value": "--mb-m: 0px; --mb-d: 0px;",
          "label": "No margin"
        },
        {
          "value": "--mb-m: 30px; --mb-d: 60px;",
          "label": "Small Margin"
        },
        {
          "value": "--mb-m: 60px; --mb-d: 120px;",
          "label": "Large Margin"
        }
      ],
      "default": "--mb-m: 0px; --mb-d: 0px;"
    },
    {
      "type": "color",
      "id": "font_color",
      "label": "t:settings_schema.general.settings.font_color.label",
      "info": "t:settings_schema.general.settings.font_color.info",
      "default": "#1E1E1E"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "t:settings_schema.general.settings.background_color.label",
      "info": "t:settings_schema.general.settings.background_color.info",
      "default": "#FFFFFF"
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collection"
    },
    {
      "type": "text",
      "id": "cta_text",
      "label": "CTA Text"
    },
    {
      "type": "url",
      "id": "cta_url",
      "label": "CTA URL"
    },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button Color",
      "options": [
        {
          "value": "btn-primary",
          "label": "Green"
        },
        {
          "value": "btn-secondary",
          "label": "White"
        },
        {
          "value": "",
          "label": "Black"
        }
      ],
      "default": "btn-primary"
    }
  ],
  "presets": [
    {
      "name": "Product Slider"
    }
  ]
}
{% endschema %}
